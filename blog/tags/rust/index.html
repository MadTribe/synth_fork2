<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Synth Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Synth Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Synth" href="/opensearch.xml"><title data-react-helmet="true">2 posts tagged with &quot;rust&quot; | Synth</title><meta data-react-helmet="true" property="og:title" content="2 posts tagged with &quot;rust&quot; | Synth"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://getsynth.com/blog/tags/rust"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-react-helmet="true" rel="shortcut icon" href="/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://getsynth.com/blog/tags/rust"><link data-react-helmet="true" rel="alternate" href="https://getsynth.com/blog/tags/rust" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://getsynth.com/blog/tags/rust" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.7de345c9.css">
<link rel="preload" href="/assets/js/runtime~main.786b5d23.js" as="script">
<link rel="preload" href="/assets/js/main.f350487c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?t("light"):t("dark")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><div class="announcementBar_3WsW" role="banner"><div class="announcementBarPlaceholder_2m9F"></div><div class="announcementBarContent_3EUC">‚≠êÔ∏è If you like Synth, <a href="https://github.com/getsynth/synth" rel="noopener noreferrer" target="_blank">give it a star on GitHub!</a></div><button type="button" class="clean-btn close announcementBarClose_38nx" aria-label="Close"><svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor"><path d="M24 20.188l-8.315-8.209 8.2-8.282-3.697-3.697-8.212 8.318-8.31-8.203-3.666 3.666 8.321 8.24-8.206 8.313 3.666 3.666 8.237-8.318 8.285 8.203z"></path></svg></button></div><nav class="navbar navbar--fixed-top navbarHideable_2qcr"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://getsynth.com" target="_self" rel="noopener noreferrer" class="navbar__brand"><img src="/img/synth_logo_large.png" alt="Synth" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/synth_logo_large.png" alt="Synth" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><a class="navbar__item navbar__link" href="/docs/getting_started/synth">Getting Started</a><a class="navbar__item navbar__link" href="/docs/examples/bank">Examples</a><a class="navbar__item navbar__link" href="/docs/integrations/postgres">Integrations</a><a class="navbar__item navbar__link" href="/docs/content/index">Generators</a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a href="https://discord.gg/H33rRDTm3p" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/getsynth/synth" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--checked react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">üåû</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" checked="" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-tags-post-list-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_2ahu thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_2hhb margin-bottom--md">All posts</div><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2021/10/07/building-a-startup-with-rust">Building a startup with Rust</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2021/09/27/crash">50 ways to crash our product</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2021/09/07/mocking-a-production-api">So you want to mock an API</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2021/08/31/seeding-databases-tutorial">Seeding test databases in 2021 - best practices</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2021/08/09/macro">Complex Procedural Rust Macros</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2021/08/04/test-data">Why not to use prod data for testing - and what to do instead</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2021/03/09/postgres-data-gen">How to Create PostgreSQL Test Data</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2021/03/08/mern">Create realistic test data for your web app</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>2 posts tagged with &quot;rust&quot;</h1><a href="/blog/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/blog/2021/10/07/building-a-startup-with-rust">Building a startup with Rust</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2021-10-07T00:00:00.000Z" itemprop="datePublished">October 7, 2021</time> ¬∑ 8 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/getsynth" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://avatars.githubusercontent.com/u/14791384?s=460&amp;v=4" alt="Christos Hadjiaslanis"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/getsynth" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Christos Hadjiaslanis</span></a></div><small class="avatar__subtitle" itemprop="description">Founder</small></div></div></div></div></header><meta itemprop="image" content="https://storage.googleapis.com/getsynth-public/media/rust.jpeg"><div class="markdown" itemprop="articleBody"><p><img alt="Rust" src="/assets/images/rust-fd0d58361c7a18b1e0c845211d1bdf27.jpeg"></p><p>When building a company you are setting out to fundamentally solve a problem.
For this reason, engineers have been systematically attracted by this romantic
idea of changing the world with your brain and a laptop. We are at heart problem
solvers.</p><p>As engineers, we can (and most of us have) become zealous at times about our
solutions to these problems. We have pragmatists who just get stuff done - they
address the symptom fast and effectively. We have idealists who will grind at an
elegant scalable solution and try to treat the disease. Whichever camp you
subscribe to, at a certain point you need to form an opinion about which
technologies you are going to use to solve the problems you see in the world -
and this opinion will inevitably cause contention.</p><p>Conventional wisdom is to &#x27;use the right tool for the job&#x27;. The choice of
programming language for example, depends on the domain of the problem you are
trying to solve. If you&#x27;re implementing some algorithm, in a secluded project,
it&#x27;s easy to make the case about what the language for the job may be. You can
run a benchmark and literally test the execution time for each candidate
language (if you&#x27;re optimising for execution time). You can persuade yourself
you&#x27;ve made a rational and &#x27;objectively correct&#x27; decision.</p><p>However, in the context of building a business, your optimisation function is a
high-dimensional mess involving performance, development velocity, hiring,
server costs, ecosystem, tooling, support, licenses etc. You can assign weights
to what is most important for your business, but at the end of the day the
decision is inevitably qualitative.</p><p>At Synth, we&#x27;re working on building the best data generator in the world. We
made a conscious decision to use Rust for our main line of products. After more
than a year of building I&#x27;ve had the opportunity to see Rust at its best and
worst in the context of starting a company - this post is a compilation of
these (at times cynical) thoughts.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="development-velocity"></a>Development Velocity<a class="hash-link" href="#development-velocity" title="Direct link to heading">#</a></h2><p>Rust has a <em>really</em> steep learning curve. Coming from an OO background it took
me <em>months</em> to become productive in Rust. This was incredibly frustrating for me
as I felt that my lack of productivity was impacting the team, which it was.
Even when you eventually do become productive (and you will), Rust forces you to
really think deeply about what you&#x27;re doing and things inevitably take longer to
get over the line. A poorly thought out design decision today can come back to
haunt you months later. What should be a simple change or refactor can end up
resulting in complete tear down as you try to appease the borrow checker. This
is deadly.</p><p>The entire premise of a startup is that <em>you have to iterate rapidly</em>. Very few
companies know what they should be building from day one. It&#x27;s an iterative
process involving a feedback loop of talking to users and making changes to
reflect the feedback. The faster you can make that feedback loop, the higher
probability you have of success.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="correctness"></a>Correctness<a class="hash-link" href="#correctness" title="Direct link to heading">#</a></h2><p>The evident hit in development velocity is redeemed to an extent by Rust&#x27;s
emphasis on writing correct programs. &quot;if it compiles it works&#x27; so to speak.
I&#x27;ve found this to be true for the most part while building with Rust and it is
an absolute joy to work with for this reason.</p><p>Even if your program is not perfect, you understand the failure modes much
better. The set of unknown failure modes is reduced substantially as your
program breaks in exactly the way you expect it to. The lack of null pointers in
conjunction with the <code>Result</code> paradigm (vs say, exceptions) compels you to build
correct programs where edge cases are well understood and are handled explicitly
by you (or <code>unimplemented!</code> but no one is perfect).</p><p>If you&#x27;ve reached product market fit - correctness may counteract the
development velocity hit. When you know what you&#x27;re building you need to iterate
less. Your dev team is also going to be spending less time dealing with bugs as
you&#x27;ve already dealt with that while trying to appease the compiler.</p><p>If it compiles it works - and this is an invaluable asset when you&#x27;re
aggressively shipping code.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="talent"></a>Talent<a class="hash-link" href="#talent" title="Direct link to heading">#</a></h2><p>Getting great talent is unbelievably imortant for an early stage startup. The
fact that the absolute number of competent and experienced Rust developers is so
small initially seems detrimental to getting great people. This is exacerbated
by Rust&#x27;s steep learning curve as you need to hire someone with experience, or
it&#x27;s going to take months for them to become productive. However, this is not
the full picture.</p><p>In our experience the competence of your average Rust developer is much higher
than more conventional programming languages. Something spoke to these
individuals when they picked up Rust, and it&#x27;s hard to put your finger on it but
it&#x27;s that same quality that makes a great engineer. It&#x27;s also been a pleasant
surprise to find out that really good engineers will seek you out as an
employer <em>because you use Rust</em>. They don&#x27;t want to work in *script or Java or
C++. They want to work with Rust because it&#x27;s great.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="open-source"></a>Open Source<a class="hash-link" href="#open-source" title="Direct link to heading">#</a></h2><p>At Synth, we&#x27;ve chosen to adopt an open-core business model. The idea behind an
open-core business is you develop and open source product with a permissive
license which solves a real <em>technical</em> problem. You work on building a user
base, a community and a great product all out in the open. You then structure
your business model around solving the corresponding <em>organisational</em> problem -
and that&#x27;s how you make money.</p><p>We&#x27;ve been really lucky to have a really active set of contributors - giving
ideas, reporting bugs and contributing (at times very significant) code. It is
hard to know for sure, but we have a strong hunch that a lot of the contributors
are active because they have an interest in Rust projects specifically. A lot of
our contributors are also interested in learning Rust - not necessarily being
veterans of the language. This has worked out great as the more experienced
members of our core team mentor and review code of young rustaceans, building a
symbiotic positive feedback loop.</p><p>Thank you to all our contributors - you know who you are and you guys are
amazing.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="libraries"></a>Libraries<a class="hash-link" href="#libraries" title="Direct link to heading">#</a></h2><p>Rust has an ecosystem of incredibly high quality libraries. The Rust core team
has led by example and focused on a high quality and tight standard
library. The result of a highly focused standard library is (unfortunately) a
lack of canonical libraries for doing things outside the standard library. So
you want a webserver, pick from one of the 100s available. You want a crate (
Rust lingo for library) for working with JWT tokens? Here&#x27;s 9, pick one. I mean,
even something as fundamental as an asynchronous runtime is split
between <code>tokio</code> and <code>async-std</code> and others. As a young rustacean this can
be overwhelming.</p><p>What ends up happening over time is certain libraries become implicitly
canonical as they receive overwhelming support and start becoming serious
dependencies differentiating from their alternatives. Also in a project
update from  RustConf 2021 it <a href="https://youtu.be/ylOpCXI2EMM?t=1048" target="_blank" rel="noopener noreferrer">was mentioned</a> that the idea of having &#x27;recommended crates&#x27; may be visited in the
future. </p><p>The lack of canonical non-standard libraries is an issue when you&#x27;re getting
started - but over time this diminishes as you get a better understanding of the
ecosystem. What <em>has</em> been constantly detrimental to our development velocity
has been the lack of <em>client</em> libraries for Rust. We&#x27;ve had to write a
bunch of different integrations ourselves but they&#x27;re often clunky as we
don&#x27;t  have the time to invest in making them really high quality. For
example most of Google&#x27;s products have at best an unofficial code-generated
crate maintained by the community, and at worst absolutely nothing. You
need to write it from scratch.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="should-you-build-your-startup-with-rust"></a>Should you build your startup with Rust?<a class="hash-link" href="#should-you-build-your-startup-with-rust" title="Direct link to heading">#</a></h2><p>Well it depends. Assuming you&#x27;re building a product in the right domain for
Rust (say a CLI as opposed to a social media site), even then the answer is not
clear cut. If you don&#x27;t have close to 100% conviction that you know what you&#x27;re
building, I would be inclined to say no. Development velocity and being able to
make rapid iterations is so important for an early stage startup that it
outweighs a lot of the benefits that Rust brings to the table.</p><p>If your company is later stage, and you know understand exactly what you should
be building (assuming this is every the case) then I would say yes. The
&#x27;correctness&#x27; of Rust programs and the propensity of Rust to attract great
engineers can help in building a great engineering culture and a great company.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/rust">rust</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/startup">startup</a></li></ul></div><div class="col col--3 text--right"><a aria-label="Read more about Building a startup with Rust" href="/blog/2021/10/07/building-a-startup-with-rust"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/blog/2021/08/09/macro">Complex Procedural Rust Macros</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2021-08-09T00:00:00.000Z" itemprop="datePublished">August 9, 2021</time> ¬∑ 8 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/getsynth" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://avatars.githubusercontent.com/u/4200835?v=4" alt="Andre Bogus"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/getsynth" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Andre Bogus</span></a></div><small class="avatar__subtitle" itemprop="description">Chief Rustacean</small></div></div></div></div></header><meta itemprop="image" content="https://live.staticflickr.com/2785/4317096083_24697db960_b.jpg"><div class="markdown" itemprop="articleBody"><p>I recently wrote the most complex procedural Rust macro I‚Äôve ever attempted. This post tries to outline the problems I‚Äôve encountered and tells how I overcame them.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="the-background"></a>The Background<a class="hash-link" href="#the-background" title="Direct link to heading">#</a></h2><p>With synth, we are building a declarative command line test data generator. For now, the specification that declares what test data to build is just JSON that gets deserialised to our data structures using <code>serde_json</code>. This was a quick and easy way to configure our application without much overhead in terms of code. For example:</p><div class="prism-code language-json codeBlockContainer_2gih"><div class="codeBlockContent_3z4W json"><pre tabindex="0" class="prism-code language-json codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;array&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;length&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;number&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;constant&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;content&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;object&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;number&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;string&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;faker&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;generator&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;name&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;email&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;string&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;faker&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;generator&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;ascii_email&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><div class="buttonsBlock_3if4"><button type="button" aria-label="Copy code to clipboard" class="codeButton_1NX4 copyButton_2e3i clean-btn">Copy</button><button type="button" aria-label="Run code with Synth" class="codeButton_1NX4 runButton_2gRE">Run</button></div></div></div><p>However, it‚Äôs also not very nice to write (for example JSON has no comments, no formulas, etc.), so we wanted to bind our specification to a scripting language. Our end goal is to extend the language (both in terms of builtin functions and syntax) to make the configuration really elegant. After some testing and benchmarking different runtimes, our choice fell on <a href="https://github.com/koto-lang/koto" target="_blank" rel="noopener noreferrer">koto</a>, a nice little scripting language that was built foremost for live coding. </p><p>Unfortunately, koto has a very bare interface to bind to external Rust code. Since we are talking about a rather large number of types we want to include, it was clear from the start that we would want to generate the code to bind to koto.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="early-beginnings"></a>Early Beginnings<a class="hash-link" href="#early-beginnings" title="Direct link to heading">#</a></h2><p>So I started with a somewhat simple macro to wrangle koto types (e.g. Maps) into our Rust types. However, I soon found that the marshalling overhead would have been fine for an initial setup phase, but not for recurrent calls into koto (for example for filter functions called for each row). Thus I changed my approach to try and bind functions, then extended that to types and impl blocks.</p><p>I found ‚Äì as I then thought ‚Äì a genius technique of generating functions that would call each other, thus daisy-chaining a series of code blocks into one that could then be called with another <code>bindlang_main!()</code> proc macro:</p><div class="prism-code language-rust codeBlockContainer_2gih"><div class="codeBlockContent_3z4W rust"><pre tabindex="0" class="prism-code language-rust codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#bfc7d5"><span class="token plain">static FN_NUMBER: AtomicUsize = AtomicUsize::new(0);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">fn next_fn(mut b: Block, arg: &amp;Expr) -&gt; Item {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let number = FN_NUMBER.fetch_add(1, SeqCst);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let this_fn = fn_ident(number);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    if let Some(n) = number.checked_sub(1) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        let last_fn = fn_ident(n);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        b.stmts.push(parse_quote! { #last_fn(#arg); });</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    b.stmts.extend(last_call);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    parse_quote! { fn #this_fn(#arg) { #b } }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#[proc_macro]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">fn bindlang_main(arg: TokenStream) -&gt; TokenStream {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let arg = ident(arg.to_string());</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    TokenStream::from(if let Some(n) = FN_NUMBER.load(SeqCst).checked_sub(1) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        let last_fn = fn_ident(n);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        quote! { #last_fn(#arg) }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    } else {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        proc_macro2::TokenStream::default()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    })</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><div class="buttonsBlock_3if4"><button type="button" aria-label="Copy code to clipboard" class="codeButton_1NX4 copyButton_2e3i clean-btn">Copy</button></div></div></div><p>I also wrote a derive macro to implement the marshalling traits. This worked well for a small example that was entirely contained within one module, but failed once the code was spread out through multiple modules: The functions would no longer be in the same scope and therefore stopped finding each other.</p><p>Worse, I needed a number of pre-defined maps with functions for method dispatch for our external types within koto. A type in Rust can have an arbitrary number of impl blocks but I needed exactly <em>one</em> table, and I couldn‚Äôt simply daisy-chain those.</p><p>It was clear I needed a different solution. After thinking long and hard I came to the conclusion that I needed to pull all the code together in one scope, by the <code>bindlang_main!()</code> macro. My idea was that I create a <code>HashMap</code> of <code>syn::Item</code>s to be quoted together into one <code>TokenStream</code>. A lazy static <code>Arc&lt;Mutex&lt;Vec&lt;Context&gt;&gt;&gt;</code> was to collect the information from multiple attribute invocations:</p><div class="prism-code language-rust codeBlockContainer_2gih"><div class="codeBlockContent_3z4W rust"><pre tabindex="0" class="prism-code language-rust codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#bfc7d5"><span class="token plain">#[derive(Default)]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">struct Context {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    bare_fns: Vec&lt;MethodSig&gt;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    modules: HashMap&lt;String, Vec&lt;MethodSig&gt;&gt;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    vtables: HashMap&lt;String, Vec&lt;MethodSig&gt;&gt;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    types: HashMap&lt;String, String&gt;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">lazy_static::lazy_static! {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    static ref CONTEXT: Arc&lt;Mutex&lt;Context&gt;&gt; = Arc::new(Mutex::new(Context::default()));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#[proc_macro_attribute]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pub fn bindlang(_attrs: TokenStream, code: TokenStream) -&gt; TokenStream {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let code_cloned = code.clone();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let input = parse_macro_input!(code_cloned as Item);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // evaluate input here, and store information in Context</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // CONTEXT.lock().unwrap()...</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    code</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><div class="buttonsBlock_3if4"><button type="button" aria-label="Copy code to clipboard" class="codeButton_1NX4 copyButton_2e3i clean-btn">Copy</button></div></div></div><p>This was when I found out that none of <code>syn</code>&#x27;s type is <code>Send</code> and therefore cannot be stored within a <code>Mutex</code>. My first attempt to circumvent this was moving everything to <code>String</code>s and using <code>syn::parse_str</code> to get the items out. This failed because of macro hygiene: Each identifier in Rust <code>proc_macro</code>s has an identity. Two identifiers resulting from two macro operations will get different identities, no matter if their textual representation is the same.</p><p>I also found that <code>proc_macro_derive</code>s have no way to get the <code>#[derive(..)]</code> attribute of the type, and I wanted to also bind derived trait implementations (at least for <code>Default</code>, because some types have no other constructors). So I removed the derive and moved the implementation to the <code>#[bindlang]</code> attribute macro, which now works on types, impl blocks and fns.</p><p><strong>Beware: This makes use of the (unspecified, but as of now working) top-down order of macro expansion to work!</strong></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="dirty-tricks-avoided"></a>Dirty tricks avoided<a class="hash-link" href="#dirty-tricks-avoided" title="Direct link to heading">#</a></h2><p>There is a <code>Span::mixed_context()</code> variant that will yield semi-hygienic macros (like with <code>macro_rules</code>). However, this looked risky (macro hygiene is there to protect us, so we better have a good reason to override it), so I took the data oriented approach, collecting the info I needed to create the code in the <code>lazy_static</code> to walk within <code>bindlang_main!()</code>. I still tried to generate the trait impls for marshalling directly in the attribute macro, but this again ran into macro hygiene trouble, because I could not recreate the virtual dispatch table identifiers. After moving this part to the main macro, too, the macro finally expanded successfully.</p><p>Except it didn‚Äôt compile successfully.</p><p>I had forgotten to <code>use</code> the items I was creating code for in the macro, and koto requires all external types to implement <code>Display</code>. So I added those imports as macro arguments and added the <code>Display</code> <code>impl</code>s to be met with a type inference error within the macro invocation. Clearly I needed some type annotations, but the error message only showed me the macro invocation, which was pretty unhelpful.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="expanding-our-vision"></a>Expanding Our Vision<a class="hash-link" href="#expanding-our-vision" title="Direct link to heading">#</a></h2><p>My solution to debug those was to <code>cargo expand</code> the code, comment out the macro invocation and copy the expanded portions in its place so that my IDE would pinpoint the error for me. I had to manually un-expand some <code>format!</code> invocations so the code would resolve correctly, and finally found where I needed more type annotations. With those added, the code finally compiled. Whew!</p><p>I then extended the bindings to also cover trait impls and <code>Option</code>s, while my colleague Christos changed the code to marshall Rust values into koto values to mangle <code>Result::Err(_)</code> into koto‚Äôs runtime errors. Remembering that implicit constructors (structs and enum variants) are also useful, I added support to binding those if public. There was another error where intermediate code generated wouldn&#x27;t parse, but some <code>eprintln!</code> debugging helped pinpoint the piece of code where it happened.</p><p>When trying to bind functions taking a non <code>self</code> referenced argument (e.g. <code>fn from(value: &amp;Value) -&gt; Self</code>), I found that the bindings would not work, because my <code>FromValue</code> implementation could not get references. Remember, a function in Rust cannot return a borrow into a value that lives only within it. It took me a while to remember I <a href="https://llogiq.github.io/2015/08/19/closure.html" target="_blank" rel="noopener noreferrer">blogged</a> about the solution in 2015! Closures to the rescue! The basic idea is to have a function that takes a closure with a reference argument and return the result of that closure:</p><div class="prism-code language-rust codeBlockContainer_2gih"><div class="codeBlockContent_3z4W rust"><pre tabindex="0" class="prism-code language-rust codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#bfc7d5"><span class="token plain">pub trait RefFromValue {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    fn ref_from_value&lt;R, F: Fn(&amp;Self) -&gt; R&gt;(</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        key_path: &amp;KeyPath&lt;&#x27;_&gt;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        value: &amp;Value,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        f: F,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ) -&gt; Result&lt;R, RuntimeError&gt;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><div class="buttonsBlock_3if4"><button type="button" aria-label="Copy code to clipboard" class="codeButton_1NX4 copyButton_2e3i clean-btn">Copy</button></div></div></div><p>Having this in a separate trait allows us to distinguish types where the borrow isn&#x27;t <code>&amp;T</code>, e.g. for <code>&amp;str</code>. Also we gain a bit of simplicity by using unified function call syntax (<code>MyType::my_fn(..)</code> instead of <code>v0.my_fn</code>). This also meant I had to nest the argument parsing: I did this by creating the innermost <code>Expr</code> and wrap it in argument extractors in reverse argument order:</p><div class="prism-code language-rust codeBlockContainer_2gih"><div class="codeBlockContent_3z4W rust"><pre tabindex="0" class="prism-code language-rust codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#bfc7d5"><span class="token plain">let mut expr: Expr = parse_quote! { #path(#(#inner_idents),*) };</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">for (i, ((a, v), mode)) in idents.iter().zip(args.iter()).enumerate().rev() {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    expr = if mode.is_ref() {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        parse_quote! { </span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            ::lang_bindings::RefFromValue::ref_from_value(</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &amp;::lang_bindings::KeyPath::Index(#i, None),</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                #a,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                |#v| #expr</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            )?</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    } else {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        parse_quote! {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            match (::lang_bindings::FromValue::from_value(</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &amp;::lang_bindings::KeyPath::Index(#i, None),</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                #a</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            )?) { </span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                (#v) =&gt; #expr</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    };</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><div class="buttonsBlock_3if4"><button type="button" aria-label="Copy code to clipboard" class="codeButton_1NX4 copyButton_2e3i clean-btn">Copy</button></div></div></div><p>Note that <code>match</code> in the <code>else</code> part is there to introduce a binding without requiring a <code>Block</code>, a common macro trick. Now all that was left to do was add <code>#[bindlang]</code> attributes to our <code>Namespace</code> and its contents, and also add a lot of <code>Display</code> implementations because koto requires this for all <code>ExternalValue</code> implementors.</p><p>In conclusion, our test configuration should now look something like:</p><div class="prism-code language-undefined codeBlockContainer_2gih"><div class="codeBlockContent_3z4W"><pre tabindex="0" class="prism-code language-undefined codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#bfc7d5"><span class="token plain">synth.Namespace({</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    synth.Name(&quot;users&quot;): synth.Content.Array (</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            synth.Name(&quot;id&quot;): synth.Content.Number(NumberContent.Id(schema.Id)),</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            synth.Name(&quot;name&quot;): synth.Content.String(StringContent.Faker(&quot;firstname&quot;, [&quot;EN&quot;])),</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            synth.Name(&quot;email&quot;): synth.Content.String(StringContent.Faker(&quot;email&quot;, [&quot;EN&quot;])),</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    synth.Content.Number(NumberContent.Constant(10))</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    })</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">})</span></span></code></pre><div class="buttonsBlock_3if4"><button type="button" aria-label="Copy code to clipboard" class="codeButton_1NX4 copyButton_2e3i clean-btn">Copy</button></div></div></div><p>That&#x27;s only the beginning: I want to introduce a few coercions, a custom koto prelude and perhaps some syntactic sugar to make this even easier to both read and write.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="the-takeaway"></a>The Takeaway<a class="hash-link" href="#the-takeaway" title="Direct link to heading">#</a></h2><p>Macros that collect state to use later are possible (well, as long as the expansion order stays as it is) and useful, especially where code is strewn across various blocks (or even files or modules). However, if code relies on other code, it best be emitted in one go, otherwise module visibility and macro hygiene conspire to make life hard for the macro author. And if at one point the expansion order gets changed in a way that breaks the macro, I can change it to a standalone crate to be called from build.rs thanks to <code>proc_macro2</code> being decoupled from the actual implementation.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/rust">rust</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/macros">macros</a></li></ul></div><div class="col col--3 text--right"><a aria-label="Read more about Complex Procedural Rust Macros" href="/blog/2021/08/09/macro"><b>Read More</b></a></div></footer></article></main></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Learn</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/">What is Synth?</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/getting_started/synth">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/examples/bank">Examples</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/download">Download</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/content/index">Generators</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/integrations/postgres">Integrations</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/getsynth/synth" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discord.gg/H33rRDTm3p" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/terms">Terms and Conditions</a></li><li class="footer__item"><a class="footer__link-item" href="/privacy">Privacy Policy</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://getsynth.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_MyFc"><img src="/img/synth_logo_large.png" alt="Built with &lt;3 by OpenQuery in London" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/img/synth_logo_large.png" alt="Built with &lt;3 by OpenQuery in London" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">Copyright ¬© 2021 OpenQuery.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.786b5d23.js"></script>
<script src="/assets/js/main.f350487c.js"></script>
<script>window.Papercups={config:{accountId:"41ff5b3d-e2c2-42ed-bed3-ef7a6c0dde62",baseUrl:"https://app.papercups.io",greeting:"",newMessagePlaceholder:"Start typing...",primaryColor:"#00dab8",requireEmailUpfront:!1,showAgentAvailability:!1,subtitle:"Ask us anything in the chat window below üòä",title:"Welcome to Synth"}}</script>
<style>
              @media (max-width: 996px) {
                .Papercups-toggleButtonContainer {
                  bottom: 80px;
                }

                .Papercups-chatWindowContainer {
                  bottom: 160px;
                }
              }
            </style>
<script async defer="defer" src="https://app.papercups.io/widget.js"></script></body>
</html>